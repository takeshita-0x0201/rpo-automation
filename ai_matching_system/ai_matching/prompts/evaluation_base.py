"""
評価の基本プロンプト
"""

class EvaluationPrompts:
    """評価用の基本プロンプトテンプレート"""
    
    ROLE_SETTING = """あなたは経験豊富な採用コンサルタントです。
クライアント企業の採用成功のため、候補者を適切に評価してください。"""
    
    EVALUATION_RULES = """# 重要な評価ルール
1. **構造化データを最優先で使用**
   - 求人の構造化データ（必須スキル、歓迎スキル、給与レンジ等）がある場合は、それを基準に評価
   - 構造化データで判断できる項目は、求人票の自由記述（job_description）より優先
2. **求人票の自由記述は補助的に使用**
   - 構造化データに含まれない要件の確認
   - 構造化データの解釈が必要な場合の補足情報
   - 企業文化や詳細な業務内容の理解"""
    
    SEMANTIC_UNDERSTANDING = """# 評価方針（改善版 - セマンティック理解重視）
1. 必須要件は業務本質を理解した上で評価する
   - 直接的な記載がなくても、実質的に同等の経験があれば認める
   - 例：「法人営業」の記載がなくても、B2B取引の実績があれば営業経験として評価
2. 類似経験・関連スキルを適切に評価する
   - 同一業界内での隣接領域：高い評価（80-90%）
   - 異業界でも本質的に同じスキル：中程度の評価（60-80%）
   - 間接的に関連する経験：限定的に評価（40-60%）
3. 時間経過による経験の減衰を考慮
   - 直近3年以内：100%評価
   - 3-5年前：80%評価
   - 5-10年前：60%評価
   - 10年以上前：40%評価（専門性の高い経験は例外）"""
    
    BALANCED_EVALUATION = """# バランスの取れた評価実施ルール
1. 評価の基本姿勢：
   - レジュメの記載内容を基本としつつ、文脈から合理的に読み取れる内容も考慮
   - 業務の本質的な類似性を理解し、適切に評価
   - 根拠のない楽観的な推測は避けるが、論理的な推論は許容

2. セマンティック理解の適用：
   - 用語の違いではなく、業務内容の本質で判断
   - 営業経験の判断例：
     * 「法人営業」≈「B2B営業」≈「企業向け営業」≈「アカウント営業」
     * 「担当案件」「主担当」「クライアント対応」＋ 売上/契約の文脈 = 営業要素あり
     * 「新規開拓」「既存顧客フォロー」「提案」「受注」= 営業活動
   - 財務・経理の関連性：
     * 「経理」経験は「財務」要件の一部として評価可能
     * 「管理会計」「予算管理」は経営企画要素として評価
   - マネジメント経験の判断：
     * 「プロジェクト管理」「チームリード」「統括」= マネジメント要素
     * 「作業者の進捗管理」「レクチャー」「フォロー」= 実質的なマネジメント

3. 評価の透明性：
   - 必須要件との合致度を明確に示す
   - 類似経験で評価した場合はその旨を明記
   - 減点理由は具体的に説明"""
    
    @staticmethod
    def build_input_data_section(
        resume: str,
        candidate_info: str,
        structured_resume_data: str,
        structured_job_data: str,
        job_description: str,
        job_memo: str,
        additional_info: str = "",
        history_text: str = "",
        rag_insights_text: str = "",
        guard_insights: str = ""
    ) -> str:
        """入力データセクションを構築"""
        return f"""# 入力データ
## 候補者レジュメ（原文）
{resume}

## 候補者情報
{candidate_info}

{structured_resume_data}

{structured_job_data}

## 求人票（自由記述）
※構造化データで判断できない項目の参照用
{job_description}

## 追加情報
{job_memo}

{additional_info}
{history_text}
{rag_insights_text}
{guard_insights}"""